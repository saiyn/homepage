---
layout: post
title:  "C++ 学习笔记"
date:   2015-12-25 15:15:54
categories: C++
excerpt: C++
---

* content
{:toc}



---

## 构造函数

构造函数是特殊的成员函数，只要创建类类型的新对象，都要执行构造函数。
<pre><code>
class Sales_item{
public:
	Sales_item(): units_sold(0), revenue(0.0){}
private:
	std::string isbn;
	unsigned units_sold;
	double revenue;
}</code></pre>

构造函数分两个阶段执行：(1)初始化阶段；(2)普通的计算阶段。

> * 不管成员是否在构造函数初始化列表中显示初始化，类类型的数据成员总是在初始化阶段初始化。初始化发生在计算阶段开始之前。
> * 没有默认构造函数的类类型的成员，以及const或者引用类型的成员，都必须在构造函数初始化列表中进行初始化。

例如，下面的构造函数是错误的：
<pre><code>
class ConstRef{
public:
	ConstRef(int ii);
private:
	int i;
	const int ci;
	int &ri;
};

//no explicit constructor initializer: error ri is uninitialized
ConstRef::ConstRef(int ii){
	i = ii;	//ok
	ci = ii; //error:cannot assign to a const
	ri = i;	 //error：assigns to ri which was not bound to an object
}
</code></pre>
初始化const或引用类型数据成员的唯一机会是在构造函数初始化列表中。该构造函数的正确方式为：
<pre><code>ConstRef::ConstRef(int ii):i(ii), ci(i), ri(ii){}
</code></pre>


























