---
layout: post
title:  "Git GitHub笔记"
date:   2016-1-25 15:15:54
categories: git
excerpt: git github
---

* content
{:toc}

记录开发中实际涉及的Git知识

---

## 追溯ffmpeg最新版本修复内存泄露的版本

最近几天一直在解决项目中使用ffmpeg进行mjpeg硬件加速编码出现内存泄露的问题，通过我司内部的内存泄露检测工具初步定位到是
ffmpeg代码的问题，试着在当前ffmpeg版本3.2.2进行修复，发现没有效果，然后决定升级到3.3.3版本试一下。果然，mjpeg的硬件加速编码的内存泄露问题在新版本上已经解决了。

想通过git追溯是在哪个版本上进行怎样的修改的，我在自己笔记本上执行`git pull`想先更新到github上的最新版本，但是提示`plese commit your changes or stash them`的错误，已经忘记之前在已经ffmpeg源码时加入了什么修改代码，所以没有执行`git stash`先保存起来我之前的修改，而是直接执行`git reset --hard`进行版本回退，再执行更新。

然后执行`git log --grep="memory leak"`，筛选一些版本修改记录，发现一个历史提交好像有关联:

![mem](http://omp8s6jms.bkt.clouddn.com/image/git/mem_leak.png)


## 2017/01/20 

### 查看某个文件某个历史版本的内容

1.首先使用命令`git log --follow -p xxx`　查看该文件各个历史版本，类似于svn上的`show log`菜单。

2.再使用命令`git show yyy:xxx`，其中`yyy`为上面命令可以获得的commit版本编号。 


---
---

## 2016/8/7 实际使用问题与收获

今天在我的新笔记本上clone我的github上的日志仓库时，碰到一个问题。
执行完'git clone git@github.com:saiyn/homepage'后发现homepage文件夹里面只有一个.git和一个LISENSE
我想起来我的仓库中确实只有gh-pages分支是有代码的，于是我执行命令查看分支情况：
<pre><code>$git branch
* master
  gh-pages
</code></pre>
于是我认为只要执行一下切换分支命令'git checkout gh-pages'应该就可以了。但是发现执行完前面这个命令后，homepage目录里依然只有2个文件。
网上搜了一下发觉，原来是我没有理解远程仓库的概念。
<pre><code>$git branch -r
 origin/HEAD -> origin/master
 origin/gh-pages
 origin/master

$git checkout origin/gh-pages
</code></pre>
执行完上面的命令就可以将远程仓库中的相应分支代码给download下来了。也就是说'git checkout'命令用于本地和远程仓库效果是不一样的。要注意远程仓库的概念。







































