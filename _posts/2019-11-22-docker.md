---
layout: post
title:  "Docker 笔记"
date:   2019-11-21 15:15:54
categories: Linux
excerpt: Docker linux container
---

* content
{:toc}


# Basic

<br />

## 安装docker

<br />

[参考这个](https://docs.docker.com/engine/install/ubuntu/)


<br />

## 基本命令

<br />

* 进入container内的shell -> `sudo docker container exec -it 3695c98d9f78 /bin/bash`
* 清除系统中所有的container和images -> `sudo docker system prune -a`
* 清除系统中所有的docker volumes -> `sudo docker volume prune`
* 清除所有container的log -> `sudo sh -c "truncate -s 0 /var/lib/docker/containers/*/*-json.log"`

<br />



## docker-compose的应用

<br />

### 重新build并启动某一个service

<br />
在我们更新了ui容器的js代码后，如果只是执行`docker-compose restart ui`会发现网页并没有更新
这时可以依次执行如下命令:

* docker-compose stop ui
* docker-compose build --no-cache ui
* docker-compose up -d --no-deps ui

<br />

---

# docker in Pycharm

<br />

在window上设置Docker的`Expose daemon on tcp://localhost:2375 without TLS`很方便，当时ubuntu上有点免费，查询了各种解决方案，发现使用nmap的ncat工具可以轻松解决问题。

  $sudo ncat -lknvp 2375 -c "ncat -U /var/run/docker.sock"

<br />




