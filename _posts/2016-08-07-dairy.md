---
layout: post
title:  "流水笔记"
date:   2016-08-07 15:15:54
categories: Diary
excerpt: ffmpeg linux
---

* content
{:toc}

记性越来越差，遇到技术问题网上找到解决办法后，如果不记录下来，下次再遇到根本记不起来当时是怎样解决的。

---


## 2016/11/22

### 动态链接库

1.Linux发行版中动态链接库一般位于/lib和/usr/lib目录中。

2.Linux系统中的动态链接库配置文件一般位于`/etc/ld.so.conf`文件中,里面存放的是可以被系统共享的动态链接库所在目录的名字。

3.位于/sbin目录下的`ldconfig`命令主要搜索/lib和/usr/lib,以及配置文件/etc/ld.so.conf里所列目录下搜索可用的动态链接库文件。然后创建动态加载程序/lib/ld-linux.so.2所需要的链接和缓存文件(etc/ld.so.cache).

4.运行`ldconfig <dir>`命令将指定目录下的动态链接库被系统共享起来。

5.

---

## 2016/11/21

Linux　`dd`命令

> * 1.if=文件名：输入文件名，缺省为标准输入。
> * 2.ibs=bytes:一次输入字节数,obs=bytes：一次输出字节数,bs=bytes：读入/输出字节数
> * 3.cbs=bytes：一次转字节数，即指定转换缓存区大小。



---

## 2016/11/18

1.执行`apt autoremove`以删除安装一些软件所需的临时依赖包，这样可以释放一些空间。

###  如何编译出ffplay_g

1.编译出ffplay_g的第一步是能够编译出ffplay，网上查阅知悉前提是要安装了sdl。这样在配置和编译ffmpeg时，才能生成ffplay。因为ffmpeg里面
会自动去检测系统中是否已经安装了sdl。

2.在安装sdl1.2时出现“正试图覆盖/usr/bin/sdl-config,它同时被包含于软件包sdl-devel”错误。估计是之前安装的软件有冲突。现在准备
卸载sdl-devel试试看。果然，使用`apt-get purge sdl-devel`卸载后在执行`apt-get install sdl1.2`就可以正常安装了。

3.果然，在安装好sdl1.2之后，执行`./configure --enable-shared --prefix=$HOME/install/ffmpeg --enable-debug --extra-cflags=-g --extra-ldflags=-g --enable-outdev=sdl`之后，可以看见`Enable outdevs:`底下出现了sdl。其实，不加上`--enable-outdev=sdl`也是可以的，因为执行
`./configure --help | grep sdl`看到...

### du 和 ls 的区别

1.rm 删除一个被其他进程正在打开的文件时，该文件在磁盘上的数据并不会立即释放掉。因为rm其实只是删除了文件名到文件在磁盘位置的连接，
即相当于减小了该文件的引用计数。

2．使用`lsof | grep deleted`命令可以查看所有被删除的但是文件句柄还没有释放的所有文件和打开该文件的进程。

---

## 2016/10/23

编译可调试的ffmpeg，配置选项加上`--enable-debug --extra-cflags=-g --extra-ldflags=-g`

---

## 2016/10/16

1.GDB调试技巧

> * `set scheduler-locking [on/off]` : If on. then only the current thread may run when the inferior is resumed.

这个命令的主要用途就是:The step mode optimizes for single-stepping, it prevents other theads from preempting the current thread while you are stepping, 
so that the focus of debugging does not change unexpectedly.

> * `checkpoint`: Setting a bookmark to return to later.

这个命令主要用途是:If you're stepping thru a program and you think you're getting close to the point where things go wrong. you can save a checkpoint.
Then. if you accidentally go too far and miss the critical statement, instead of having to restart your program from the beginning, you can just go back to the checkpoint and start again from there. 

> * `调试复杂的宏定义`: 在编译参数中添加`-g3`，然后在遇到需要展开的宏时调用`macro exp xxx`.

--- 

## 2016/10/07

1.记录一下微博上看到到的一篇技术文章[Unix as ID](https://sanctum.geek.nz/arabesque/series/unix-as-ide)中的精华。

首先是`File and project management`:
 
a)There are other switches to GNU ls which are less frequently used.

> * -t --List files in order of last modification date.
> * -X --Group files by extension.
> * -S --Sort by filesize.
> * -R --List files recursively.

执行下面的命令可以add explanations of what each file is for and save it as an inventory file or add it to a README.
<pre><code>$ ls -XR | vim -
</code></pre>

b)Finding files.

> * find -name '*.c' --Find files with names matching a shell-style pattern.
> * find -path '*test*' --Find fiiles with paths matching a shell-style pattern.
> * find -mtime -5  --Find files edited within the last five days.
> * find -newer server.c --Find files more recently modified than server.c.

Note,in particular,that all of these can be combined,for example to find C source files edited in the last two days:
<pre><code>$ find -name '*.c' -mtime -2
</code></pre>

c)Searching files.

> * grep -l  --Print a list of files that match without printing the matches themselves.
> * grep -v --$ grep -r someVar . | grep -v .svn

d)File metadata

The `file` tool gives you a one-line summary of what kind of file you're looking at.
<pre><code>$ find -exec file {} \;
.:				directory
./.hanoi.swp:	Vim swap file, version 7.3
./bits.c:		C source, ASCII text
</code></pre>


---


## 2016/10/04

1.使用grep时加上`--exclude-dir=`参数指定搜索时需要排除的目录。

2.在测试gstreamer的demo程序时发现，如果不加上`--gst-debug-level=4`命令行参数的话，调用插件库时会报找不到库的错误。

---

## 2016/10/02

1.运行`df -hl`查看磁盘剩余空间。

2.今天在编译gstreamer的时候，提示`NO packet glib-2.0 Found`，需要运行`apt-get install libglib2.0-dev`而不是`apt-get install glib2.0`.

3.由于系统的`/usr`磁盘容量不足，在以源代码编译安装软件时，都将`install`目录设置在容量较大的`/home`下.配置`gstreamer`安装目录很简单，就是在
执行`make`前执行`./configure --prefix=/home`。

4.一般以编译源代码安装软件都有一个设置`PATH`和`LD_LIBRARY_PATH`的过程。编辑`/etc/profile`，在文件尾部添加`export LD_LIBRARY_PATH=/home/lib:$LD_LIBRARY_PATH`以及`eport PATH=/home/bin:$LD_LIBRARY_PATH`。
当然在修改配置文件后需要执行`source /etc/profile`以使新配置立即生效。


5.gstreamer的编译使用了`pkg-config`工具，所以在编译应用程序前，先要安装上面方式添加环境变量`PKG_CONFIG_PATH`.

---

## 2016/10/01

### vim 编程技巧

1.之前安装过TAGS插件，运行`:Tlist`左侧弹出类似SI的左侧导航窗口。

2.Tab页游览目录，运行`:Te`进行分页式游览。`gt`-切换到下一页，`gT`-切换到前一页。运行`tabs`以查看当前分页情况。


---

## 2016/9/25

### 解决ubuntu 16.04 下Realtek无线网卡rtl8723be信号差的问题

在[ubuntu forums](https://ubuntuforums.org)网站上找到了相关的帖子`Realtek RTL8723BE weak wifi signal`，很多人遇到一样的问题，很多人也给了解决办法，但是很多方法不是没有用就是留了很多坑。

现在记录一下我的解决过程：

> 1.下载编译安装最新的驱动

<pre><code>#git clone git@github.com:lwfinger/rtlwifi_new.git //解决信号差问题的分支不在主干上，所以下载下过程后还要切换分支
#git branch -r 
 origin/HEAD -> origin/master
 origin/kernel_version
 origin/master
 origin/rock
 origin/rock.new_btcoex
#git checkout origin/rock.bew_btcoex   /fix再这个分支上
#git branch
* （头指针分离于　origin/rock.new_btcoex）
   master
#make 
#make insatll
</code></pre>

> 2.关掉Secure Boot

我就是在这里踩了坑，执行`modprobe -v rtl8723be`时，总是报错“Required key noy available”，帖子上也有很多人遇到相同问题，然后有一个贴出了一大段命令，如何解决这个问题。
坑的是，他的方法没有用。后来自己bing了一下这个问题，别人的一段回答马上点醒了我:Since Ubuntu kernel4.4.0-20 the `EFI_SECUER_SIG_ENFORCE`kermel config has been enabled.
That prevents from loading unsigned third party modules if UEFI Secure Boot is enbaled。
<pre><code>
#mokutil --disable-validation  //关掉UEFI Secure
#reboot
</code></pre>

> 3.卸载旧驱动，加载新驱动

从前后会进入grub启动界面，在里面确认关掉UEFI Secure。重启完成后执行下面

最重要的是在`/etc/modprobe.d/rtl8723be.conf`里面加上:`options rtl8723be ant_sel=2`这么一行配置。
<pre><code>
#modprobe -vr rtl8723be
#modeprobe -v rtl8723be
</code></pre>



## 2016/9/20

### 搜狗输入中英切换的快捷键是ctrl+空格

### 树莓派３－开发环境搭建
前几天入手了目前最新的树莓派３，由于没有购买显示器并且没有可以通过网线连接到我树莓派的路由器，所以开发环境的搭建有点坎坷。

> 第一步：能够ssh登陆到树莓派

想要配置开发环境，由于没有显示器，首先得可以ssh上树莓派。直接通过笔记本本地连接树莓派，通过`Advanced IP Scanner`软件始终扫描不到树莓派IP.
网上资源显示，树莓派默认是DHCP，但是我以前自己开发的网络设备就支持在dhcp超时一定时间后进入auto ip 模式，这样可以也可以直连访问。
没办法，只能第二天去公司，接上HDMI显示器和键盘开本地配置网络了。
静态ＩＰ的配置方法：
<pre><code>

</code></pre>


命令行配置wifi无线连接


### 树莓派上git配置和生成RSA用于clone　github上的仓库

> 1.设置用户和邮箱

git config --global user.name "xxx"
git config --global user.email "xxxx"

> 2.生成SSH秘钥
ssh-keygen -t rsa  //直接回车３次，就将key默认放在/root/.ssh下

> 3.在github上添加ssh秘钥
cat /root/.ssh/id_rsa.pub复制到github中settting中。


１）＃iwlist scan
执行上面命令查看周围可连接的无线设备，有时需要执行多次命令才能看到信息。
２）#vi /etc/wpa_supplicant/wpa_supplicant.conf
编辑上面的wifi配置文件，在文件最后添加如下内容
network={
	ssid=""
	

## 2016/8/7

### ubantu 16.04 安装deb软件包失败的问题

今天再安装搜狗输入法的时候，双击下载下来的deb安装包，没有什么反应，然后只是弹出系统错误的对话框。
既然双击安装不行，我就在命令行执行`sudo dpkg -i xxx.deb`，结果提示依赖关系找不到，网上找到了解决办法。
就是先执行`apt-get install -f`


### git使用的命令

使用`git add <file>`将修改的文件添加到本地仓库缓冲区。
使用`git commit -m "log"`将缓冲区的内容推送到本地仓库工作区。
使用`git push origin <branch-name>`将本地修改同步到远程仓库。
当然如果是多人协作开发的仓库，则应该先执行`git pull origin <branch-name>`同步到最新版本，然后在push自己修改的内容。
